---
title: "NBA analytics"
author: "Team 22"
date: "2025-11-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("../code/00_requirements.R")
load("../data/22_DataSaving.RData")
```


```{r}
#The data are most closely related to offensive efficiency.(eFG%, FG%, TOV%)
#eFG% vs OffRtg
ggplot(df, aes(x = `eFG%`, y = OffRtg)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "eFG% vs Offensive Rating",
    x = "Effective Field Goal Percentage (eFG%)",
    y = "Offensive Rating (OffRtg)"
  )

#FG% vs OffRtg
ggplot(df, aes(x = `FG%`, y = OffRtg)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "FG% vs Offensive Rating",
    x = "Field Goal Percentage (FG%)",
    y = "Offensive Rating (OffRtg)"
  )



#TOV% vs OffRtg
ggplot(df, aes(x = `TOV%`, y = OffRtg)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "Turnover% vs Offensive Rating",
    x = "Turnover Percentage (TOV%)",
    y = "Offensive Rating (OffRtg)"
  )

```

  Offensive efficiency (OffRtg) is most strongly related to a team’s shooting performance. Teams with higher effective field goal percentage (eFG%) and field goal percentage (FG%) tend to have higher offensive efficiency. This suggesting that shot quality and scoring efficiency are the primary drivers of offensive success. In contrast, turnover percentage (TOV%) shows a negative relationship with OffRtg. This means that teams that commit fewer turnovers are generally more efficient on offense because they preserve more possessions to create scoring opportunities.
  
```{r}
def_corr <- df %>%
  select(DefRtg, `DREB%`, STL, BLK, PF) %>%
  cor(use = "complete.obs")

def_corr

```



```{r}
#The data are most closely related to defensive efficiency.
ggplot(df, aes(x = `DREB%`, y = DefRtg)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "Defensive Rebound% vs Defensive Rating",
    x = "Defensive Rebound Percentage (DREB%)",
    y = "Defensive Rating (DefRtg, lower is better)"
  )

ggplot(df, aes(x = STL, y = DefRtg)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "Steals vs Defensive Rating",
    x = "Steals per Game",
    y = "Defensive Rating (DefRtg, lower is better)"
  )

ggplot(df, aes(x = PF, y = DefRtg)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "Personal Fouls vs Defensive Rating",
    x = "Personal Fouls per Game (PF)",
    y = "Defensive Rating (DefRtg, lower is better)"
  )

```
Defensive rebound percentage (DREB%) shows the strongest relationship with Defensive Rating. Teams with higher defensive rebounding rates tend to allow fewer second-chance scoring opportunities, which directly improves their defensive efficiency. Steals (STL) also show a moderate relationship with Defensive Rating, as forcing turnovers can disrupt the opponent’s offensive possessions. However, personal fouls (PF) do not show a clear pattern. Overall, controlling the defensive glass and generating turnovers are the two most impactful defensive factors.

```{r}
## Offensive vs Defensive Rankings for Top Teams


```







